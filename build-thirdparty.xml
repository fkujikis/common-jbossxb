<?xml version="1.0"?>
<!-- $Id: build-thirdparty.xml,v 1.113 2006/05/23 23:19:24 jgreene Exp $ -->
<project name="main.build"
          default="synchronize"
          basedir=".">

   <!-- Property File definitions -->
   <property file="local.properties"/>
   <property file="synchronize.properties"/>
   <property environment="env"/>

   <!-- Property Definitions -->
   <property name="generatedLibrariesFiles" value="thirdparty/libraries.ent"/>

   <!-- Allow jbossbuild.repository to be set from (in order or priority)
      + Command line -Djbossbuild.repository=...
      + synchronize.properties jbossbuild.repository setting
      + JBOSS_REPOSITORY environment variable
   -->
   <condition property="jbossbuild.repository" value="${env.JBOSS_REPOSITORY}">
      <isset property="env.JBOSS_REPOSITORY"/>
   </condition>
   <!-- Fall back to default -->
   <property name="jbossbuild.repository" value="http://repository.jboss.com"/>

   <!-- File Imports -->
   <import file="tools/etc/jbossbuild/tasks.xml"/>


   <!-- Main Definition of dependencies -->
   <build id="jbossas-thirdparty"
          impltitle="JBossAS"
          implversion="jboss-head"
          implvendor="JBoss Inc."
          implurl="http://www.jboss.org"
          description="JBoss Application Server"
          cvsroot="${cvs.prefix}@cvs.forge.jboss.com:/cvsroot/jboss"
          thirdpartypath="thirdparty/"
          location="${jbossbuild.repository}"
          targetdefs="targets">

      <!--
        The repository is in CVS under the module repository.jboss.com whose contents
        are pushed to the http://repository.jboss.com site.
      -->
      <componentref name="apache-slide" version="2.0"/> 
      <componentref name="wutka-dtdparser" version="1.2.1"/>
      <componentref name="sun-jaf" version="1.0.2"/>
      <componentref name="apache-xerces" version="2.7.1"/>
      <componentref name="oswego-concurrent" version="1.3.4"/>  
      <componentref name="jboss/common-core" version="1.0"/>
      <componentref name="jboss/common-logging-spi" version="1.0"/>
   </build>

   <synchronizeinfo/>

   <!-- Generate the targets -->
   <generate generate="jbossas-thirdparty"/>


   <target name="generate-lib-file"
      description="generate libraries.ent and thirdparty license info"
      depends="synchronize">
         <gen-lib-file filename="${generatedLibrariesFiles}" path="tools/etc/buildmagic/" />
      <visit-componentref-graph
         componentVisitor="org.jboss.ant.util.graph.ComponentRefGraphLicenseVisitor" />
   </target>

</project>
